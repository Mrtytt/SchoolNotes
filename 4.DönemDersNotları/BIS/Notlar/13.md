#### Swapping 
- Bellek üzerinde alan kalmadığı an, bekleme üzerinde olan processler diske gönderilir.
- Bellekten atılması *swap out*, belleğe alınması *swap in*'dir.

- 100 mb bir processin 50MB/sn bir diskte swap out - swap in 4 sn sürer.
- I/O bekliyorsa swap out yapamazsın, başa bir event bekliyorsa bu işlem yapılabilir.

- Mobil işletim sistemlerinde swapping işlemini desteklemez.
	- Flash belleğe yazma sayısı limiti sebebiyle

####  Bitişik Hafıza Atama
- Bellek 2 kısmı vardır, os ve kullanıcı uygulamaları
- Sistem mümkün olduğunca bitişik hafızalara atmaya çalışır.

- Interrupt vector table
	- Interruptların numalaraları, tanımlamaları bulunur.
	- BIOS'ta, irq
	- İşletim sistemi kendi oluşturur.
	- İşletim sistemine yakın bir yere konumlanır.

- Bir process için ayrılan alan diğer processe devam eder.

#### Hafıza Koruma
- Trap adres hatası
- Bir process'in sahip olmadığı hafıza alanına erişmesi engellenmelidir.

#### Hafıza Alanı Atama
- Fixed-size partitions
	- Static, sabit boyutlu parçalara ayrılır.
- Variable-size partitions          
	- Dinamik,değişebilir process boyutuna göre.

- İhtiyacı kadar hafıza alanı varsa hafızaya yüklenir ve CPU bekler

%%SORU%%
- Hafızada boş alanların birleşmesi, processlere uygun alanların oluşturulması *dynamic storage allocation*

%%SORU : Fragmentation, Segmentation, Paging%%
## Fragmentation
- *Fragmentation* processlerin hafızaya yüklenirken ve atılırken hafıza alanları sürekli parçalanır.
- Bir process için yeterli alan olabilir ama parçalar halinde olabilir ya da processler arasında boşluklar olabilir.

- *First Fit* ilk uygun boşluğa process yerleştirilir.
	- First fit ile allocation yaparsak en fazla %50'lik kısmı boş bırakılmasına sebep olabilir. Buna *%50 Kuralı* denir.
- *Segmentation, Paging* yaklaşımları fragmentation çözümünde kullanılabilir.

### Segmentation
- Her segment bir isim ve uzunluğu sahiptir
- <segmentation number (ad),offset >
- Derleme sırasında derleyici segment atamalarını gerçekleştirir

- Mantıksal address -> segment ve offset adresiyle iki boyutlu adresleme yapılır.
- Segment table'a gidilir, burada tek boyutlu hafıza adresine dönüşüm gerçekleştirilir

- Her segmentin base ve limit addressleri vardır,kendisi için.
- Segmentler her kaydırıldığında segment table güncellenir.

- Fiziksel bellek segmentlere ayrılmıştır.
- Her segmentin boyutu birbirinden farklı olabilir, variable olabilir.

### Paging (Sayfalama)
- Segmentation göre daha çok tercih edilir, daha dinamiktir.

- Paging'da
	- Fiziksel hafıza *frame* adı verilen alanlara ayrılırr.
	- Mantıksal hafıza ise aynı boyutta *page* adı verilen bloklara bölünür.

- Mantıksal adres alanı ve fiziksle adres alanı birbirinden ayrıdır.
- Bir process çalıştırılacağını zaman kaynak kod diskten alınır ve framelere yerleştirilir.
- Sayfa bulunmazsa *page fault* oluşur.

- CPU daki address *page number* (p) ve *page offset* (d)'den oluşur.
- Page table bulunur. Bu da pagelerin fiziksel hafızadaki base adres içerir.
- Her page ilk çalışma anında hata verir. Daha hafızaya gelmemiştir demektir.

- Page size 512 byte ile 1 GB arasında olabilir.
- 32-bit CPU'da 32-bit  ile page table adresi verilir, 2^32 frame bulunur.
- Bir process sisteme çalışmak için geldiğinde gerekli sayfa sayısı belirlenir.
- Processin her page'i için bir frame gereklidir.

- Her sayfa bir frame yerleştirildikçe page table güncellenir.

#### Translation Look-Aside Buffer 'TLB'
- Sık ve son kullanılan page'ler *tlb*'de saklanır.
- Aradığımız page tlb de bulunursa hız artar.

- Bazı işletim sistemleri ayrı ayrı page table'lar tutulabilir.
- Modern sistemlerde 1 milyon giriş bulunur, page table'larda.

- TLB page number ve frame number değerlerini tutar, page table'ın sık kullanılan kısımlarını içerir.
- Öncelikle TLB'de arama yapılır bulunamazsa arama page table'da devam eder.

- TLB dolu ise ve bir page TLB'ye eklenecekse cbazı algoritmalarla kurban seçilir.
- TLB hit ne kadar yüksekse gerçekleşme zamanı o kadar düşüktür.
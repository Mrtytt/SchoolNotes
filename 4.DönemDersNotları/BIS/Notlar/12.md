#### Resource-Allocation-Graph Algorithm
- Nerede kilitleme olup olmayacağını tahmin edebilir.
- Resource allocation kullanılması için her kaynaktan *1 tane* olduğunda kullanılabilir.

- Bir process bir kaynağı isterse 
	- Kaynaktan process *assignment* gösterir. -> **assignment edge**
	- Process kaynağa giden *request*. -> **request edge**
	- Çizikli çizgiler tahminlerdir, ihtiyaç duyulabilir. -> **claim edge**
	- Bir çevrim oluşmamalı bu deadlock anlamına gelir buna göre hareketlerini değerlendirir.

#### Wait-For
- Resource Allocation Graph'ında kaynaklar çıkarılırsa *wait-for graph'ı* elde edilir.
- WaitFor da döngü varsa deadlock vardır.

%%SORU%%
#### Banker Algorithm 
- RAGA'dan farkı aynı kaynak birden fazla olabilir.

- Para yatıran önce para çeken sonra buna *safe state* denir, burada deadlock olmaz.
- Sekansın tümü sorunsuz şekilde kullanabilirse *safe state* olur.
- Para çeken önce para yatıran sonra buna *unsafe state* denir.

- Bir process sisteme geldiğinde maksimum kaynak ihtiyacını bildirir.

- *Available* -> Vektör şeklinde ifade edilir, o anda boş kaynakları gösterir.
- *Max* -> Processlerin kaynaklara olan max isteklerini gösterir.
- *Allocation* -> Tahsis edilen kaynakları gösteriyor.
- *Need* = Max - Allocation

### Deadlock Algılama
- Deadlock problemlerini çözmek için
	- Resoruce Allocation Graph -> Kaynaklar 1'er tane.
	- Banker Algorithm -> Kaynaklar 1'den fazla ise.
	- Request matrisi max ve need matrislerinin karşılığıdır, need'e benzer.

### Deadlock'tan Kurtulma
- Manuel giderilebilir -> resetlemek
- Sistem otomatik olarak recover yapabilir.
	- Kilitlemeye sebep olan processler sonlandırılabilir.

- 2 yöntem kullanılabilir.
	- Deadlock durumunda kullanılan tüm processler sonlandırılır.
	- Deadlock döngüsü yok olana kadar processler sonlandırılır.

- Bir process'in abort edilmesi durumunda tutarszlıklar oluşabilir.
	- Dosya yazma işlemi yarıda kalabilir.
	- Yazıcıda devam eden yazdırma yarıda kalabilir.

### Resource Preemption
- Kaynakların boşa çıkarılmasıdır.
- Deadlock çözülene kadar atanmış kaynaklar başka processlere atanır.
	- *Selecting a victim* maliyet hessaplanır, deadlock olma sıklığı, çalışma süresi
	- *Rollback* processlerin çalışma garanti edilemiyorsa process iptal edilip tekrar başlatılabilir.
	- *Starvation* bir process sürekli kesilirse, victim olarak şeçilmesinde maksimum limit belirlenebilir.

## Main Memory 'RAM'
- Main memory, general purpose register'lar -> geçiçi genel amaçlı kayıt alanlarıdır.
- Makine komutlarında hafıza adresini parametre olarak alan komutlar vardır ama disk adresini alan komutlar yoktur.
- CPU'nun ihtiyaç duyduğu veri veya komut hafızada olmalıdır.

- CPU registara 1 cycle'da erişebilir.
- Hafızaya erişim buslar üzerinden yapılır.

- Bir process'e ayrılan alana başka processler, başka kullanıcılar (çok kullnıcı sistem) erişemez.
- Koruma işlemleri donanım düzeyinde yapılır, işletim sisteminde yapılırsa performans düşer.

- *base* : Bellekteki taban adresi -> Başlangıç adresini belirler.
- *limit* : Bellekteki tavan adresi -> Boyutunu belirler.

- CPU'nun ürettiği mantıksal adres -> base ve limit değerleriyle karşılaştırılır.

#### Address Binding
- Bir process belleğe alınmak için input queue'ya alınır.
- Kaynak programda adres genellikle semboliktir.
- Derleyici bu adresleri yeniden yerleştirir, **relocateable** adresine dönüştürür.
- *Linkage Editor* , *loader* bu sembolik adresleri mutlak **absolute**adreslere dönüştürülür.

- Komutların veya verilerin bağlanması
	- Compile Time -> Derlenirken yapılabilir, mutlak code oluşturulabilir, yer değişirse tekrar compilelanmalı (statik)
	- Load Time -> Yüklenirken (statik)
	- Execution Time -> Bir segmentten başka bir segment'e geçilebilir, adres binding runtime da yapılabilir (dinamik)

#### Mantıksal ve Fiziksel Adres Alanı
- CPU mantıksal adres üretir.

%%SORU%%
- Compile time ya da load time'da mantıksal veya fiziksel adres üretilir.
- Execution time'da address bağlama virtual address olarak geçer (page number + offset)

- Runtime sanal adresin fiziksel adrese dönüştürülmesi doanım bileşeni MMU (Memory Managament Unit) tarafından yapılır.

- Base register, relocation register -> base address tutulur.
- Mantıksal address + base address = fiziksel address işlemi yapılır.
- Mantıksal address [0,max] fiziksel address [R,R+max] aralığındadır.

#### Dynamic Loading
- Programın tamamı hafızaya yüklenmez, gerektikçe blok halinde yüklenir.
- Önce main program hafızaya yüklenir ve çalıştırılır.
- Bir program parçası (routine) çalışırken başka routine'i çağırdığında loader tarafından hafızaya yüklenir.
- Kapladığı alan itibariyle büyük olan processlerin hafızaya yüklenip çalışmasını sağlar.
- Sık kullanılmayan rutinlerin hafızada bulunmasını engeller.

#### Swapping
- Bellek üzerinde alan kalmadığı an, bekleme üzerinde olan processler diske gönderilir. 
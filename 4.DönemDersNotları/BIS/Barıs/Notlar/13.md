#### Swapping
* bellek üzerinde alan kalmadığı an, bekleme üzerinde olan processler diske gönderilir
* bellekten atılması swap out, belleğe getirilmesi swap in

- 100mb bir processin 50MB/sn bir diskte swap out - swap in 4sn sürer

* bir process i/o bekliyorsa swap out yapılamaz, ama başka bir event bekliyorsa swap out yapılabilir

* mobil sistemlerde swapping işlemi desteklenmez
    - flash belleğin yazma sayısı limiti sebebiyle

#### Bitişik Hafıza Atama

* bellek 2 kısım -> os ve kullanıcı uygulamaları
* sistem mümkün olduğunca bitişik hafızalara atamaya çalışır

* interrupt vector table 
    - inerruptların numaraları, tanımlamaları tututlur
    - biosta , irq
    - işletim sistemi kendi oluşturur
    - işletim sistemine yakın bir yere konumlandırılır

* bir process için ayrılan alan diğer processe kadar devam eder

#### Hafıza koruma 
- trap adress hatası
- bir processin sahip olmadığı hafıza alanına erişmesi engellenmelidir

#### Hafıza alanı atama

* fixed-size partitions     ->  statik, sabit boyutlu parçalara ayrılır
* variaible-size partitions ->  dinamik, değişebiliyor process boyutuna göre

* ihtiyacı kadar hafıza alanı varsa hafızya yüklenir ve CPU bekler

%%SORU%%
* hafızada boş alanların birleştirilmesi, processlere uygun alanların oluşturulması **dynamic storage allocation** 

%%SORU: Framentation, Segmentation, Paging%%
## Framentation

* **fragmantation** processlerin hafızaya yüklenirken ve atılırken hafıza alanları sürekli parçalanır
- bir process için yeterli alan olabilir ama parçalar halinde olabilir , yada processler arasında boşluklar oluşabilir

* **first fit** ilk uygun boşluğa process yerleştirilir
    - first fit ile allocation yaprsak en fazla %50 lik kısmı boş bırakılmasına sebep olabilir buna **%50 kuralı** denir

* **segmentation**, **paging** yaklaşımları fragmentation çözümünde kullanılır

### Segmentation
* her segment bir isim ve uzunluğa sahiptir
* < segmentation nubmber (ad), offset >
* derleme sırasında derleyici segment atamalarını gerçekleştirir

* mantıksal adress -> segment segment ve offset adresiyle iki boyutlu adresleme yapılır
* segemnt table a gidilir burda tek boyutlu hafıza adresine dönüşüm gerçekleştirilir 

* her segmentin base ve limit adressleri vardır kendi için
* segmentler he kaydırıldığında segment table güncellenir

* fiziksel bellek segmentlere ayrılmıştır
* her segmentin boyutu bir birinden farklı olabilir, variaible olabilir

### Paging 'Sayfalama'
* segmentationa göre daha çok dercih edilir, daha dinamiktir

* paging de 
    * fiziksel hafıza **frame** adı verilen alanlara ayrılır
    * mantıksal hafıza ise aynı boyutta **page** adı verilen bloklara bölünür
* mantıksal adres alanı ve fiziksel adres alanı birbirinden ayrıştırılmıştır

* bir process çalıştırlacağı zaman kaynak kod diskten alınır ve framelere yerleştirilir

* sayfa bulunamazsa **page fault** oluşur

* cpu daki mantıksal adres **page number** (p) ve **page offset** (d) den oluşur

* page table bulunur buda pagelerin fiziksel hafızadaki base adresi içerir

* her page ilk çalışma anında hep hata verir - daha hafızaya gelmemiştir

* page size 512 byte ile 1GB arasında olabilir

* örnek
    - page size 2048 byte olsa idi
    - proces 72766 byte olsa
    - 72766 / 2048  = 35 page + 1086
    - 36 page gerekir son page 962 byte boş kalır

* 32-bit CPU'da 32-bit ile page table adresi verilir, 2^32 frame bulunur

- bir process sisteme çalışmak içn geldiğinde gerekli sayfa sayısı belirlenir
* processin her pagei için bir frame gereklidir

* her sayfa bir frame yerleştirilince page table güncellenir

#### Translation look-aside buffer 'TLB'
* sık ve son kullanılan page ler tlb de saklanır
* aradığımız page tlb de bulunursa hız artar

* bazı işletim sistemleri ayrı ayrı page table lar tutabilir

* modern sistemlerde 1 milyon giriş bulunur page tablelarda

* tlb page number ve frame number değerlerini tutar, page tablın sık kullanılan kısımlarını içerir

* öncelikle tlb de arama yapılır bulunamazsa arama page table da devam eder

* tlb dolu ise ve bir page tlb ye eklenecekse bazı algoritmalarla kurban seçilir

* tlb hit ne kadar yüksekse gerçekleşme zamanı o kadar düşük
